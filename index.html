<script src="https://unpkg.com/@rive-app/webgl2"></script>
<script>
  const canvas = document.getElementById("canvas");
  const canvasWrapper = document.getElementById("canvas-wrapper");

  // Function to adjust the canvas-wrapper height to account for browser UI elements
  const adjustCanvasWrapperHeight = () => {
    canvasWrapper.style.height = `${window.innerHeight}px`;
  };

  // Initialize Rive animation
  const riveInstance = new rive.Rive({
    src: "thpsv4_090525.riv", // Path to your Rive file
    canvas: canvas,
    autoplay: true,
    stateMachines: "State Machine 1", // State machine in your Rive file
    renderer: "webgl2", // Explicitly use the WebGL2 renderer
    onLoad: () => {
      resizeCanvas();
      window.addEventListener("resize", resizeCanvas);
    },
  });

  // Ensure the canvas resizes dynamically
  const resizeCanvas = () => {
    // Adjust the canvas-wrapper height dynamically
    adjustCanvasWrapperHeight();

    // Adjust canvas size to match its CSS dimensions
    const rect = canvas.getBoundingClientRect();
    canvas.width = rect.width * window.devicePixelRatio;
    canvas.height = rect.height * window.devicePixelRatio;

    // Resize the drawing surface to match the new canvas dimensions
    riveInstance.resizeDrawingSurfaceToCanvas();
  };

  // Initial adjustments
  adjustCanvasWrapperHeight();
  resizeCanvas();

  // Add resize event listener
  window.addEventListener("resize", resizeCanvas);
</script>
